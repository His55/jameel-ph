<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… Ù„Ù„ØªØµÙˆÙŠØ± Ø§Ù„ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ | jameel-ph</title>

<!-- SEO Meta Tags -->
<meta name="description" content="Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª.">
<meta name="keywords" content="Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù…, ØªØµÙˆÙŠØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ, jameel-ph, ØªØµÙˆÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠ, ÙØ¹Ø§Ù„ÙŠØ§Øª, Ù…Ù†ØªØ¬Ø§Øª">
<meta name="author" content="Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù…">
<meta name="robots" content="index, follow">
<meta name="language" content="Arabic">
<meta name="revisit-after" content="7 days">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://jameel-ph.github.io/">
<meta property="og:title" content="Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… Ù„Ù„ØªØµÙˆÙŠØ± Ø§Ù„ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ | jameel-ph">
<meta property="og:description" content="Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª.">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI2MzAiIHZpZXdCb3g9IjAgMCAxMjAwIDYzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEyMDAiIGhlaWdodD0iNjMwIiBmaWxsPSIjMDAwMDAwIi8+CjxjaXJjbGUgY3g9IjYwMCIgY3k9IjMxNSIgcj0iMTAwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iOCIgZmlsbD0ibm9uZSIvPgo8Y2lyY2xlIGN4PSI2MDAiIGN5PSIzMTUiIHI9IjIwIiBmaWxsPSIjZGMyNjI2Ii8+CjxyZWN0IHg9IjUyMCIgeT0iMjM1IiB3aWR0aD0iMTYwIiBoZWlnaHQ9IjEwMCIgcng9IjEwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iNiIgZmlsbD0ibm9uZSIvPgo8cmVjdCB4PSI1NDAiIHk9IjIxNSIgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyMCIgcng9IjEwIiBmaWxsPSIjZGMyNjI2Ii8+Cjx0ZXh0IHg9IjYwMCIgeT0iNDUwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iNDgiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZGMyNjI2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7YrNmF2YrZhCDYutin2YbZhTwvdGV4dD4KPHRleHQgeD0iNjAwIiB5PSI1MDAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0iI2ZmZmZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+2YXYtdmI2LEg2YHZiNiq2YjYutix2KfZgdmKPC90ZXh0Pgo8L3N2Zz4K">
<meta property="og:site_name" content="Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… Ù„Ù„ØªØµÙˆÙŠØ±">
<meta property="og:locale" content="ar_SA">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://jameel-ph.github.io/">
<meta property="twitter:title" content="Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… Ù„Ù„ØªØµÙˆÙŠØ± Ø§Ù„ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ | jameel-ph">
<meta property="twitter:description" content="Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª.">
<meta property="twitter:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI2MzAiIHZpZXdCb3g9IjAgMCAxMjAwIDYzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEyMDAiIGhlaWdodD0iNjMwIiBmaWxsPSIjMDAwMDAwIi8+CjxjaXJjbGUgY3g9IjYwMCIgY3k9IjMxNSIgcj0iMTAwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iOCIgZmlsbD0ibm9uZSIvPgo8Y2lyY2xlIGN4PSI2MDAiIGN5PSIzMTUiIHI9IjIwIiBmaWxsPSIjZGMyNjI2Ii8+CjxyZWN0IHg9IjUyMCIgeT0iMjM1IiB3aWR0aD0iMTYwIiBoZWlnaHQ9IjEwMCIgcng9IjEwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iNiIgZmlsbD0ibm9uZSIvPgo8cmVjdCB4PSI1NDAiIHk9IjIxNSIgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyMCIgcng9IjEwIiBmaWxsPSIjZGMyNjI2Ii8+Cjx0ZXh0IHg9IjYwMCIgeT0iNDUwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iNDgiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZGMyNjI2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7YrNmF2YrZhCDYutin2YbZhTwvdGV4dD4KPHRleHQgeD0iNjAwIiB5PSI1MDAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0iI2ZmZmZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+2YXYtdmI2LEg2YHZiNiq2YjYutix2KfZgdmKPC90ZXh0Pgo8L3N2Zz4K">

<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSIjMDAwMDAwIi8+CjxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjgiIHN0cm9rZT0iI2RjMjYyNiIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjIiIGZpbGw9IiNkYzI2MjYiLz4KPHJlY3QgeD0iMTAiIHk9IjEwIiB3aWR0aD0iMTIiIGhlaWdodD0iOCIgcng9IjEiIHN0cm9rZT0iI2RjMjYyNiIgc3Ryb2tlLXdpZHRoPSIxLjUiIGZpbGw9Im5vbmUiLz4KPHJlY3QgeD0iMTEiIHk9IjgiIHdpZHRoPSIxMCIgaGVpZ2h0PSIyIiByeD0iMSIgZmlsbD0iI2RjMjYyNiIvPgo8L3N2Zz4K">
<link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiBmaWxsPSIjMDAwMDAwIi8+CjxjaXJjbGUgY3g9IjkwIiBjeT0iOTAiIHI9IjQwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iNiIgZmlsbD0ibm9uZSIvPgo8Y2lyY2xlIGN4PSI5MCIgY3k9IjkwIiByPSIxMCIgZmlsbD0iI2RjMjYyNiIvPgo8cmVjdCB4PSI1NSIgeT0iNTUiIHdpZHRoPSI3MCIgaGVpZ2h0PSI0NSIgcng9IjUiIHN0cm9rZT0iI2RjMjYyNiIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJub25lIi8+CjxyZWN0IHg9IjYwIiB5PSI0NSIgd2lkdGg9IjYwIiBoZWlnaHQ9IjEwIiByeD0iNSIgZmlsbD0iI2RjMjYyNiIvPgo8L3N2Zz4K">

<!-- Schema.org structured data -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù…",
    "jobTitle": "Ù…ØµÙˆØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ Ù…Ø­ØªØ±Ù",
    "description": "Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª",
    "url": "https://jameel-ph.github.io/",
    "sameAs": [
        "https://github.com/jameel-ph"
    ],
    "knowsAbout": ["Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ", "ØªØµÙˆÙŠØ± Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª", "ØªØµÙˆÙŠØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª", "Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ"],
    "hasOccupation": {
        "@type": "Occupation",
        "name": "Ù…ØµÙˆØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ"
    }
}
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9769053286aff9db',t:'MTc1NjQzODc1Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Supabase SDK -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script>
    // Supabase Configuration (Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ Ø§Ù„ØµØ­ÙŠØ­Ø©)
    const SUPABASE_URL = 'https://uspxswigpccxmgujpdpg.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVzcHhzd2lncGNjeG1ndWpwZHBnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0MjcxODYsImV4cCI6MjA3MjAwMzE4Nn0.I3hFirAEgcU7L4HGTfTP4h1cCEQFMHT7wDi-1-5AKtY';
    // Initialize Supabase client and make it available globally
    window.supabase = window.supabase || {};
    window.supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');
        
        * {
            font-family: 'Cairo', sans-serif;
        }
        
        .brand-red { background-color: #dc2626; }
        .brand-red-hover:hover { background-color: #b91c1c; }
        .text-brand-red { color: #dc2626; }
        
        .gallery-item {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .admin-panel {
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
        }
        
        .modal {
            backdrop-filter: blur(10px);
        }
        
        .image-preview {
            max-width: 200px;
            max-height: 200px;
            object-fit: cover;
        }
        
        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #dc2626;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .portfolio-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-black text-white shadow-lg fixed w-full top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4 space-x-reverse">
                    <h1 class="text-2xl font-bold text-brand-red">Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù…</h1>
                    <span class="text-gray-300">Ù…ØµÙˆØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ</span>
                </div>
                <div class="hidden md:flex space-x-6 space-x-reverse items-center">
                    <a href="#home" class="hover:text-brand-red transition-colors">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                    <a href="#portfolio" class="hover:text-brand-red transition-colors">Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</a>
                    <a href="#services" class="hover:text-brand-red transition-colors">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
                    <a href="#about" class="hover:text-brand-red transition-colors">Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ</a>
                    <a href="#contact" class="hover:text-brand-red transition-colors">Ø§Ù„ØªÙˆØ§ØµÙ„</a>
                    <a href="login.html" id="login-btn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
                    <a href="register.html" id="register-btn" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
                    <button id="logout-btn" class="hidden bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
                    <button onclick="showAdminLogin()" class="bg-brand-red px-4 py-2 rounded hover:bg-red-700 transition-colors">
                        <i class="fas fa-cog ml-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹
                    </button>
                </div>
                <button class="md:hidden" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars text-xl"></i>
                </button>
<script>
// Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø© ÙˆØ£Ø²Ø±Ø§Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„/Ø§Ù„Ø®Ø±ÙˆØ¬
let currentUser = null;
const loginBtn = document.getElementById('login-btn');
const registerBtn = document.getElementById('register-btn');
const logoutBtn = document.getElementById('logout-btn');
const loginBtnMobile = document.getElementById('login-btn-mobile');
const registerBtnMobile = document.getElementById('register-btn-mobile');
const logoutBtnMobile = document.getElementById('logout-btn-mobile');

// Ø¥ØµÙ„Ø§Ø­ Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù„Ù„Ø¬ÙˆØ§Ù„
document.addEventListener('DOMContentLoaded', function() {
    updateAuthButtons();
    if (logoutBtnMobile) {
        logoutBtnMobile.onclick = function() {
            localStorage.removeItem("user");
            updateAuthButtons();
            window.location.reload();
        };
    }
});

function updateAuthButtons() {
    currentUser = JSON.parse(localStorage.getItem("user"));
    if (currentUser) {
        if (loginBtn) loginBtn.classList.add('hidden');
        if (registerBtn) registerBtn.classList.add('hidden');
        if (logoutBtn) logoutBtn.classList.remove('hidden');
        if (loginBtnMobile) loginBtnMobile.classList.add('hidden');
        if (registerBtnMobile) registerBtnMobile.classList.add('hidden');
        if (logoutBtnMobile) {
            logoutBtnMobile.classList.remove('hidden');
            logoutBtnMobile.style.display = 'block';
        }
    } else {
        if (loginBtn) loginBtn.classList.remove('hidden');
        if (registerBtn) registerBtn.classList.remove('hidden');
        if (logoutBtn) logoutBtn.classList.add('hidden');
        if (loginBtnMobile) loginBtnMobile.classList.remove('hidden');
        if (registerBtnMobile) registerBtnMobile.classList.remove('hidden');
        if (logoutBtnMobile) {
            logoutBtnMobile.classList.add('hidden');
            logoutBtnMobile.style.display = 'none';
        }
    }
}

if (logoutBtn) {
    logoutBtn.addEventListener('click', () => {
        localStorage.removeItem("user");
        updateAuthButtons();
        window.location.reload();
    });
}
if (logoutBtnMobile) {
    logoutBtnMobile.addEventListener('click', () => {
        localStorage.removeItem("user");
        updateAuthButtons();
        window.location.reload();
    });
}

window.addEventListener('DOMContentLoaded', updateAuthButtons);
// ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ù…Ø¹ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ ÙˆØ§Ù„ÙˆØ§ØªØ³Ø§Ø¨
async function loadPortfolio() {
    const { data: images } = await window.supabase.from('portfolio').select('*').order('created_at', { ascending: false });
    const container = document.getElementById('portfolio-list');
    if (!container) return;
    container.innerHTML = '';
    images.forEach(async (img) => {
        const imgDiv = document.createElement('div');
        imgDiv.className = 'relative bg-white rounded shadow p-2 mb-6';
        imgDiv.innerHTML = `
            <img src="${img.image_url}" alt="${img.title}" class="rounded w-full mb-2 max-h-72 object-contain whatsapp-status-img" style="cursor:pointer;">
            <div class="flex items-center gap-2 mb-2">
                <button class="like-btn bg-blue-500 text-white px-3 py-1 rounded flex items-center gap-1" data-id="${img.id}">
                    <i class="fas fa-thumbs-up"></i> <span class="like-count">0</span>
                </button>
                <a class="whatsapp-btn text-green-600 text-xl" title="Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø­Ø§Ù„Ø© ÙˆØ§ØªØ³Ø§Ø¨" target="_blank">
                    <i class="fab fa-whatsapp"></i>
                </a>
            </div>
            <div class="font-bold">${img.title}</div>
            <div class="text-gray-600 text-sm mb-1">${img.description || ''}</div>
        `;
        container.appendChild(imgDiv);

        // ØªØ­Ù…ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª
        let likesCount = 0;
        try {
            const { data: likes } = await window.supabase.from('likes').select('*').eq('portfolio_id', img.id);
            likesCount = likes ? likes.length : 0;
        } catch (err) {
            likesCount = 0;
        }
        imgDiv.querySelector('.like-count').textContent = likesCount;

        // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ (Ø¥Ø¹Ø¬Ø§Ø¨ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…)
        // Ø¯Ø¹Ù… Ø§Ù„Ù„Ù…Ø³ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
        const likeBtn = imgDiv.querySelector('.like-btn');
        const likeHandler = async function(e) {
            e.preventDefault();
            const user = JSON.parse(localStorage.getItem('user'));
            if (!user || !user.id || !img.id || isNaN(Number(user.id)) || isNaN(Number(img.id))) {
                alert('ğŸ”’ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¹Ø¬Ø§Ø¨');
                return;
            }
            try {
                const { data: existingLike, error: checkError } = await window.supabase.from('likes').select('*').eq('portfolio_id', img.id).eq('user_id', user.id).maybeSingle();
                if (checkError) {
                    console.error('Supabase Like Check Error:', checkError);
                    alert('âš ï¸ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨: ' + (checkError.message || ''));
                    return;
                }
                if (existingLike) {
                    alert('âŒ Ù„Ù‚Ø¯ Ø£Ø¹Ø¬Ø¨Øª Ø¨Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ù‚Ø¨Ù„');
                    return;
                }
                const { error } = await window.supabase.from('likes').insert([{ portfolio_id: Number(img.id), user_id: Number(user.id), user_name: user.name || '' }]);
                if (!error) {
                    const { data: newLikes } = await window.supabase.from('likes').select('*').eq('portfolio_id', img.id);
                    imgDiv.querySelector('.like-count').textContent = newLikes ? newLikes.length : likesCount + 1;
                } else {
                    console.error('Supabase Like Error:', error);
                    alert('âš ï¸ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨: ' + (error.message || ''));
                }
            } catch (err) {
                console.error('Supabase Like Exception:', err);
                alert('âš ï¸ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨: ' + (err.message || ''));
            }
        };
        likeBtn.addEventListener('click', likeHandler);
        likeBtn.addEventListener('touchstart', likeHandler);

        // Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨: Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹
        const whatsappBtn = imgDiv.querySelector('.whatsapp-btn');
        const siteUrl = window.location.origin + window.location.pathname;
        whatsappBtn.href = `https://wa.me/?text=${encodeURIComponent('Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø©: ' + img.image_url + '\nÙ„Ù„Ù…Ø²ÙŠØ¯ Ø²Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹: ' + siteUrl)}`;
        // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ù†ÙØ³Ù‡Ø§ ÙŠÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹
        imgDiv.querySelector('.whatsapp-status-img').onclick = function() {
            window.open(siteUrl, '_blank');
        };
    });
}

window.addEventListener('DOMContentLoaded', () => {
    updateAuthButtons();
    loadPortfolio();
});
</script>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-gray-900 px-4 py-4">
            <a href="#home" class="block py-2 hover:text-brand-red">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="#portfolio" class="block py-2 hover:text-brand-red">Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</a>
            <a href="#services" class="block py-2 hover:text-brand-red">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
            <a href="#about" class="block py-2 hover:text-brand-red">Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ</a>
            <a href="#contact" class="block py-2 hover:text-brand-red">Ø§Ù„ØªÙˆØ§ØµÙ„</a>
            <a href="login.html" id="login-btn-mobile" class="block w-full text-right py-2 text-blue-500">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
            <a href="register.html" id="register-btn-mobile" class="block w-full text-right py-2 text-green-500">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
            <button id="logout-btn-mobile" class="block w-full text-right py-2 text-red-500 hidden">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            <button onclick="showAdminLogin()" class="block w-full text-right py-2 text-brand-red">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
        </div>
    </nav>
    <!-- Hero Section -->
    <section id="home" class="bg-black text-white pt-20 pb-16">
        <div class="container mx-auto px-4 text-center">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-5xl font-bold mb-6">
                    Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø¹Ø§Ù„Ù… <span class="text-brand-red">Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</span>
                </h2>
                <p class="text-xl mb-8 text-gray-300" id="heroDescription">
                    Ø£Ø³Ø¹Ù‰ Ù„ØªØ®Ù„ÙŠØ¯ Ù„Ø­Ø¸Ø§ØªÙƒÙ… Ø§Ù„Ø«Ù…ÙŠÙ†Ø© Ø¨Ø£Ø¬Ù…Ù„ Ø§Ù„ØµÙˆØ± ÙˆØ£Ø±ÙˆØ¹ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª
                </p>
                <div class="flex justify-center space-x-4 space-x-reverse">
                    <a href="https://wa.me/967771145933" class="bg-brand-red px-8 py-3 rounded-lg hover:bg-red-700 transition-colors">
                        <i class="fab fa-whatsapp ml-2"></i>ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ
                    </a>
                    <a href="#portfolio" class="border border-white px-8 py-3 rounded-lg hover:bg-white hover:text-black transition-colors">
                        Ø§Ø³ØªØ¹Ø±Ø¶ Ø£Ø¹Ù…Ø§Ù„ÙŠ
                    </a>
                </div>
            </div>
        </div>
    </section>


    <!-- Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± ÙÙ‚Ø· -->
    <section id="portfolio" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12 text-black">Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</h2>
            <div id="portfolioGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
        </div>
    </section>
    <script>
    // Ù…Ø¹Ø±Ø¶ ØµÙˆØ± ÙÙ‚Ø· Ù…Ø¹ Ø²Ø± Ø¥Ø¹Ø¬Ø§Ø¨ ÙˆØ²Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø®ØªØµØ±
    const supabase = window.supabase;
    const portfolioGrid = document.getElementById('portfolioGrid');
    async function loadPortfolio() {
        const { data: portfolio, error } = await supabase
            .from('portfolio')
            .select('*')
            .order('created_at', { ascending: false });
        if (error) {
            portfolioGrid.innerHTML = `<p class="text-red-600 text-center">âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±</p>`;
            return;
        }
        if (!portfolio || portfolio.length === 0) {
            portfolioGrid.innerHTML = `<p class="text-gray-500 text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ± ÙÙŠ Ø§Ù„Ù…Ø¹Ø±Ø¶ Ø­Ø§Ù„ÙŠØ§Ù‹.</p>`;
            return;
        }
        portfolioGrid.innerHTML = '';
        portfolio.forEach(item => {
            const div = document.createElement('div');
            div.classList.add("bg-white", "rounded-lg", "shadow-md", "p-4");
            div.innerHTML = `
                <img src="${item.image_url}" alt="${item.title}" class="rounded-lg w-full mb-3 whatsapp-status-img" style="cursor:pointer;">
                <h3 class="text-lg font-bold">${item.title}</h3>
                <p class="text-gray-600">${item.description || ''}</p>
                <div class="flex gap-2 mt-2">
                    <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded flex items-center gap-2" id="like-btn-${item.id}">
                        <i class="fas fa-thumbs-up"></i>
                        <span id="likes-count-${item.id}">0</span> Ø¥Ø¹Ø¬Ø§Ø¨
                    </button>
                    <a href="https://wa.me/?text=${encodeURIComponent(item.image_url + '\nhttps://his55.github.io/jameel-ph')}" target="_blank" class="text-green-600 text-xl whatsapp-btn" title="Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØµÙˆØ±Ø© Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                </div>
            `;
            portfolioGrid.appendChild(div);
            // Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨
            div.querySelector(`#like-btn-${item.id}`).onclick = async function() {
                const user = JSON.parse(localStorage.getItem("user"));
                if (!user) {
                    alert("ğŸ”’ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¹Ø¬Ø§Ø¨");
                    return;
                }
                // ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¥Ø¹Ø¬Ø§Ø¨ Ù…Ø³Ø¨Ù‚
                const { data: existingLike } = await supabase
                    .from('likes')
                    .select('*')
                    .eq('portfolio_id', item.id)
                    .eq('user_id', user.id)
                    .maybeSingle();
                if (existingLike) {
                    alert("âŒ Ù„Ù‚Ø¯ Ø£Ø¹Ø¬Ø¨Øª Ø¨Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ù‚Ø¨Ù„");
                    return;
                }
                const { error } = await supabase
                    .from('likes')
                    .insert([{ portfolio_id: item.id, user_id: user.id }]);
                if (!error) {
                    loadLikesOnly(item.id);
                } else {
                    alert("âš ï¸ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨");
                }
            };
            // ØªØ­Ù…ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª
            loadLikesOnly(item.id);
            // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ù†ÙØ³Ù‡Ø§ ÙŠÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹
            div.querySelector('.whatsapp-status-img').onclick = function() {
                window.open(window.location.origin, '_blank');
            };
        });
    }
    async function loadLikesOnly(portfolioId) {
        const { data: likes } = await supabase
            .from('likes')
            .select('*')
            .eq('portfolio_id', portfolioId);
        document.getElementById(`likes-count-${portfolioId}`).textContent = likes.length;
    }
    loadPortfolio();
    </script>

    <!-- Services Section -->
    <section id="services" class="py-16 bg-gray-100">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12 text-black">Ø®Ø¯Ù…Ø§ØªÙŠ</h2>
            
            <!-- Loading Indicator -->
            <div id="servicesLoading" class="text-center py-8">
                <div class="loading mx-auto"></div>
                <p class="mt-4 text-gray-600">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª...</p>
            </div>
            
            <div id="servicesGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 hidden">
                <!-- Services will be loaded here -->
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-4xl font-bold mb-8 text-black">Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ</h2>
                <div id="aboutLoading" class="text-center py-8">
                    <div class="loading mx-auto"></div>
                    <p class="mt-4 text-gray-600">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
                </div>
                <div id="aboutContent" class="text-lg text-gray-700 leading-relaxed hidden">
                    <!-- About content will be loaded here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Articles Section -->
    <section id="articles" class="py-16 bg-gray-100">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12 text-black">Ù…Ù‚Ø§Ù„Ø§Øª ÙˆÙ†ØµØ§Ø¦Ø­</h2>
            
            <!-- Loading Indicator -->
            <div id="articlesLoading" class="text-center py-8">
                <div class="loading mx-auto"></div>
                <p class="mt-4 text-gray-600">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª...</p>
            </div>
            
            <div id="articlesGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 hidden">
                <!-- Articles will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 bg-black text-white">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12">ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ</h2>
            <div class="grid md:grid-cols-2 gap-12">
                <div>
                    <h3 class="text-2xl font-bold mb-6 text-brand-red">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h3>
                    <div class="space-y-4">
                        <div class="flex items-center">
                            <i class="fas fa-phone text-brand-red ml-4 text-xl"></i>
                            <span id="contactPhone">771145933</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fab fa-whatsapp text-brand-red ml-4 text-xl"></i>
                            <a href="https://wa.me/967771145933" class="hover:text-brand-red">ÙˆØ§ØªØ³Ø§Ø¨</a>
                        </div>
                        <div id="socialLinks" class="flex space-x-4 space-x-reverse mt-6">
                            <!-- Social links will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-2xl font-bold mb-6 text-brand-red">Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø©</h3>
                    <form id="contactForm" class="space-y-4">
                        <input type="text" id="clientName" placeholder="Ø§Ù„Ø§Ø³Ù…" class="w-full p-3 rounded bg-gray-800 text-white border border-gray-600 focus:border-brand-red" required>
                        <input type="email" id="clientEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" class="w-full p-3 rounded bg-gray-800 text-white border border-gray-600 focus:border-brand-red" required>
                        <input type="tel" id="clientPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full p-3 rounded bg-gray-800 text-white border border-gray-600 focus:border-brand-red" required>
                        <textarea id="clientMessage" placeholder="Ø§Ù„Ø±Ø³Ø§Ù„Ø©" rows="5" class="w-full p-3 rounded bg-gray-800 text-white border border-gray-600 focus:border-brand-red" required></textarea>
                        <button type="submit" class="w-full bg-brand-red py-3 rounded hover:bg-red-700 transition-colors">
                            <span id="contactSubmitText">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</span>
                            <div id="contactSubmitLoading" class="loading hidden"></div>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2024 Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
        </div>
    </footer>

    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg p-8 max-w-md w-full">
                <h3 class="text-2xl font-bold mb-6 text-center text-black">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±</h3>
                <form id="adminLoginForm">
                    <input type="text" id="adminUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="w-full p-3 mb-4 border rounded" required>
                    <input type="password" id="adminPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full p-3 mb-6 border rounded" required>
                    <div class="flex space-x-4 space-x-reverse">
                        <button type="submit" class="flex-1 bg-brand-red text-white py-3 rounded hover:bg-red-700">
                            <span id="loginText">Ø¯Ø®ÙˆÙ„</span>
                            <div id="loginLoading" class="loading hidden"></div>
                        </button>
                        <button type="button" onclick="hideAdminLogin()" class="flex-1 bg-gray-300 text-black py-3 rounded hover:bg-gray-400">Ø¥Ù„ØºØ§Ø¡</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="fixed inset-0 bg-gray-900 hidden z-50 admin-panel overflow-y-auto">
        <div class="container mx-auto px-4 py-8">
            <!-- Admin Header -->
            <div class="flex justify-between items-center mb-8 bg-gray-800 p-4 rounded-lg">
                <h2 class="text-2xl font-bold text-white">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù…</h2>
                <button onclick="hideAdminPanel()" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                    <i class="fas fa-times ml-2"></i>Ø¥ØºÙ„Ø§Ù‚
                </button>
            </div>

            <!-- Admin Navigation -->
            <div class="flex flex-wrap gap-4 mb-8">
                <button onclick="showAdminSection('portfolio')" class="admin-nav-btn bg-brand-red text-white px-6 py-3 rounded">
                    <i class="fas fa-images ml-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø±Ø¶
                </button>
                <button onclick="showAdminSection('services')" class="admin-nav-btn bg-gray-600 text-white px-6 py-3 rounded">
                    <i class="fas fa-briefcase ml-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª
                </button>
                <button onclick="showAdminSection('about')" class="admin-nav-btn bg-gray-600 text-white px-6 py-3 rounded">
                    <i class="fas fa-user ml-2"></i>Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©
                </button>
                <button onclick="showAdminSection('articles')" class="admin-nav-btn bg-gray-600 text-white px-6 py-3 rounded">
                    <i class="fas fa-newspaper ml-2"></i>Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª
                </button>
                <button onclick="showAdminSection('settings')" class="admin-nav-btn bg-gray-600 text-white px-6 py-3 rounded">
                    <i class="fas fa-cog ml-2"></i>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
                <button onclick="showAdminSection('messages')" class="admin-nav-btn bg-gray-600 text-white px-6 py-3 rounded">
                    <i class="fas fa-envelope ml-2"></i>Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
                </button>
                <button onclick="showAdminSection('account')" class="admin-nav-btn bg-gray-600 text-white px-6 py-3 rounded">
                    <i class="fas fa-key ml-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨
                </button>
            </div>

            <!-- Admin Sections -->
            <div id="adminContent" class="bg-gray-800 rounded-lg p-6">
                <!-- Portfolio Management -->
                <div id="adminPortfolio" class="admin-section">
                    <h3 class="text-xl font-bold text-white mb-6">Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</h3>
                    
                    <!-- Add New Image Form -->
                    <div class="bg-gray-700 p-6 rounded-lg mb-6">
                        <h4 class="text-lg font-bold text-white mb-4">Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</h4>
                        <form id="addImageForm" class="space-y-4">
                            <input type="text" id="imageTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙˆØ±Ø©" class="w-full p-3 rounded bg-gray-600 text-white" required>
                            <select id="imageCategory" class="w-full p-3 rounded bg-gray-600 text-white" required>
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
                                <option value="wedding">Ø­ÙÙ„Ø§Øª Ø§Ù„Ø²ÙØ§Ù</option>
                                <option value="portrait">Ø¬Ù„Ø³Ø§Øª ØªØµÙˆÙŠØ±</option>
                                <option value="event">Ù…Ù†Ø§Ø³Ø¨Ø§Øª</option>
                                <option value="product">Ù…Ù†ØªØ¬Ø§Øª</option>
                            </select>
                            <textarea id="imageDescription" placeholder="ÙˆØµÙ Ø§Ù„ØµÙˆØ±Ø©" class="w-full p-3 rounded bg-gray-600 text-white" rows="3" required></textarea>
                            <input type="file" id="imageFile" accept="image/*" class="w-full p-3 rounded bg-gray-600 text-white" required>
                            <div id="imagePreview" class="hidden">
                                <img id="previewImg" class="image-preview rounded">
                            </div>
                            <button type="submit" class="bg-brand-red text-white px-6 py-3 rounded hover:bg-red-700">
                                <span id="addImageText"><i class="fas fa-plus ml-2"></i>Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø©</span>
                                <div id="addImageLoading" class="loading hidden"></div>
                            </button>
                        </form>
                    </div>
                    
                    <!-- Existing Images -->
                    <div id="adminPortfolioList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Portfolio items will be loaded here -->
                    </div>
                </div>

                <!-- Services Management -->
                <div id="adminServices" class="admin-section hidden">
                    <h3 class="text-xl font-bold text-white mb-6">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª</h3>
                    
                    <!-- Add New Service Form -->
                    <div class="bg-gray-700 p-6 rounded-lg mb-6">
                        <h4 class="text-lg font-bold text-white mb-4">Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h4>
                        <form id="addServiceForm" class="space-y-4">
                            <input type="text" id="serviceName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø©" class="w-full p-3 rounded bg-gray-600 text-white" required>
                            <textarea id="serviceDescription" placeholder="ÙˆØµÙ Ø§Ù„Ø®Ø¯Ù…Ø©" class="w-full p-3 rounded bg-gray-600 text-white" rows="3" required></textarea>
                            <input type="text" id="servicePrice" placeholder="Ø§Ù„Ø³Ø¹Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" class="w-full p-3 rounded bg-gray-600 text-white">
                            <select id="serviceCategory" class="w-full p-3 rounded bg-gray-600 text-white" required>
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
                                <option value="photography">ØªØµÙˆÙŠØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ</option>
                                <option value="video">ØªØµÙˆÙŠØ± ÙÙŠØ¯ÙŠÙˆ</option>
                                <option value="editing">ØªØ­Ø±ÙŠØ± ÙˆØªØ¹Ø¯ÙŠÙ„</option>
                                <option value="package">Ø¨Ø§Ù‚Ø© Ø´Ø§Ù…Ù„Ø©</option>
                            </select>
                            <button type="submit" class="bg-brand-red text-white px-6 py-3 rounded hover:bg-red-700">
                                <span id="addServiceText"><i class="fas fa-plus ml-2"></i>Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø©</span>
                                <div id="addServiceLoading" class="loading hidden"></div>
                            </button>
                        </form>
                    </div>
                    
                    <!-- Existing Services -->
                    <div id="adminServicesList" class="space-y-4">
                        <!-- Services will be loaded here -->
                    </div>
                </div>

                <!-- About Management -->
                <div id="adminAbout" class="admin-section hidden">
                    <h3 class="text-xl font-bold text-white mb-6">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©</h3>
                    <form id="aboutForm" class="space-y-4">
                        <textarea id="aboutText" placeholder="Ø§ÙƒØªØ¨ Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø°Ø§ØªÙŠØ© ÙˆØ®Ø¨Ø±Ø§ØªÙƒ Ù‡Ù†Ø§..." class="w-full p-4 rounded bg-gray-600 text-white" rows="10" required></textarea>
                        <button type="submit" class="bg-brand-red text-white px-6 py-3 rounded hover:bg-red-700">
                            <span id="aboutSaveText"><i class="fas fa-save ml-2"></i>Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</span>
                            <div id="aboutSaveLoading" class="loading hidden"></div>
                        </button>
                    </form>
                </div>

                <!-- Articles Management -->
                <div id="adminArticles" class="admin-section hidden">
                    <h3 class="text-xl font-bold text-white mb-6">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</h3>
                    
                    <!-- Add New Article Form -->
                    <div class="bg-gray-700 p-6 rounded-lg mb-6">
                        <h4 class="text-lg font-bold text-white mb-4">Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø§Ù„ Ø¬Ø¯ÙŠØ¯</h4>
                        <form id="addArticleForm" class="space-y-4">
                            <input type="text" id="articleTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„" class="w-full p-3 rounded bg-gray-600 text-white" required>
                            <textarea id="articleContent" placeholder="Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù‚Ø§Ù„" class="w-full p-4 rounded bg-gray-600 text-white" rows="8" required></textarea>
                            <button type="submit" class="bg-brand-red text-white px-6 py-3 rounded hover:bg-red-700">
                                <span id="addArticleText"><i class="fas fa-plus ml-2"></i>Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø§Ù„</span>
                                <div id="addArticleLoading" class="loading hidden"></div>
                            </button>
                        </form>
                    </div>
                    
                    <!-- Existing Articles -->
                    <div id="adminArticlesList" class="space-y-4">
                        <!-- Articles will be loaded here -->
                    </div>
                </div>

                <!-- Settings Management -->
                <div id="adminSettings" class="admin-section hidden">
                    <h3 class="text-xl font-bold text-white mb-6">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
                    <form id="settingsForm" class="space-y-4">
                        <input type="text" id="siteTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹" class="w-full p-3 rounded bg-gray-600 text-white" required>
                        <textarea id="heroDesc" placeholder="ÙˆØµÙ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" class="w-full p-3 rounded bg-gray-600 text-white" rows="3" required></textarea>
                        <input type="tel" id="phoneNumber" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full p-3 rounded bg-gray-600 text-white" required>
                        <input type="url" id="facebookLink" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ³Ø¨ÙˆÙƒ" class="w-full p-3 rounded bg-gray-600 text-white">
                        <input type="url" id="instagramLink" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ù†Ø³ØªØºØ±Ø§Ù…" class="w-full p-3 rounded bg-gray-600 text-white">
                        <input type="url" id="twitterLink" placeholder="Ø±Ø§Ø¨Ø· ØªÙˆÙŠØªØ±" class="w-full p-3 rounded bg-gray-600 text-white">
                        <button type="submit" class="bg-brand-red text-white px-6 py-3 rounded hover:bg-red-700">
                            <span id="settingsSaveText"><i class="fas fa-save ml-2"></i>Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
                            <div id="settingsSaveLoading" class="loading hidden"></div>
                        </button>
                    </form>
                </div>

                <!-- Messages Management -->
                <div id="adminMessages" class="admin-section hidden">
                    <h3 class="text-xl font-bold text-white mb-6">Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
                    <div id="messagesList" class="space-y-4">
                        <!-- Messages will be loaded here -->
                    </div>
                </div>

                <!-- Account Management -->
                <div id="adminAccount" class="admin-section hidden">
                    <h3 class="text-xl font-bold text-white mb-6">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</h3>
                    <div class="bg-gray-700 p-6 rounded-lg">
                        <h4 class="text-lg font-bold text-white mb-4">ØªØºÙŠÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</h4>
                        <form id="accountForm" class="space-y-4">
                            <input type="text" id="newUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯" class="w-full p-3 rounded bg-gray-600 text-white" required>
                            <input type="password" id="currentPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©" class="w-full p-3 rounded bg-gray-600 text-white" required>
                            <input type="password" id="newPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©" class="w-full p-3 rounded bg-gray-600 text-white" required>
                            <input type="password" id="confirmPassword" placeholder="ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©" class="w-full p-3 rounded bg-gray-600 text-white" required>
                            <button type="submit" class="bg-brand-red text-white px-6 py-3 rounded hover:bg-red-700">
                                <span id="accountSaveText"><i class="fas fa-save ml-2"></i>Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</span>
                                <div id="accountSaveLoading" class="loading hidden"></div>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Lightbox -->
    <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-90 hidden z-50 flex items-center justify-center">
        <div class="relative max-w-4xl max-h-full p-4">
            <img id="lightboxImg" class="max-w-full max-h-full object-contain">
            <button onclick="closeLightbox()" class="absolute top-4 right-4 text-white text-3xl hover:text-brand-red">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Success Notice -->
    <div id="successNotice" class="fixed bottom-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg max-w-sm hidden">
        <div class="flex items-start">
            <i class="fas fa-check-circle text-xl ml-3 mt-1"></i>
            <div>
                <h4 class="font-bold mb-2">ğŸ‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØµÙ„Ø©!</h4>
                <p class="text-sm mb-3">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù„ÙƒÙ„ Ø§Ù„Ø²ÙˆØ§Ø± ÙÙˆØ±Ø§Ù‹!</p>
                <button onclick="hideSuccessNotice()" class="bg-white text-green-500 px-3 py-1 rounded text-sm">Ø±Ø§Ø¦Ø¹!</button>
            </div>
        </div>
    </div>

    <script>
        // Supabase Database Manager
        class SupabaseDB {
            constructor() {
                this.isSupabaseReady = false;
                this.initializeSupabase();
            }

            async initializeSupabase() {
                try {
                    // Check if Supabase is properly configured
                    if (window.supabase && SUPABASE_URL !== 'https://your-project.supabase.co') {
                        // Test connection
                        const { data, error } = await window.supabase
                            .from('portfolio')
                            .select('count', { count: 'exact', head: true });
                        
                        if (!error) {
                            this.isSupabaseReady = true;
                            console.log('âœ… Supabase connected successfully!');
                            document.getElementById('successNotice').classList.remove('hidden');
                            await this.initializeDefaultData();
                        } else {
                            throw error;
                        }
                    } else {
                        throw new Error('Supabase not configured');
                    }
                } catch (error) {
                    console.warn('âš ï¸ Supabase connection failed, using demo mode:', error);
                    this.initializeDemoMode();
                }
            }

            initializeDemoMode() {
                // Fallback to localStorage for demo purposes
                this.isSupabaseReady = false;
                if (!localStorage.getItem('photographerDB')) {
                    const demoData = {
                        portfolio: [
                            {
                                id: '1',
                                title: "Ø­ÙÙ„ Ø²ÙØ§Ù Ø±Ø§Ø¦Ø¹",
                                category: "wedding",
                                description: "Ù„Ø­Ø¸Ø§Øª Ø¬Ù…ÙŠÙ„Ø© Ù…Ù† Ø­ÙÙ„ Ø²ÙØ§Ù Ù…Ù…ÙŠØ²",
                                image_url: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y3ZmFmYyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM0YTVjNmEiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7Ysdin2YXZhCDYstmB2KfZgTwvdGV4dD48L3N2Zz4=",
                                created_at: new Date().toISOString()
                            },
                            {
                                id: '2',
                                title: "Ø¬Ù„Ø³Ø© ØªØµÙˆÙŠØ± Ø´Ø®ØµÙŠØ©",
                                category: "portrait",
                                description: "Ø¬Ù„Ø³Ø© ØªØµÙˆÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù„Ø¨ÙˆØ±ØªØ±ÙŠÙ‡",
                                image_url: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2VkZjJmNyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM0YTVjNmEiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7YrNmE2LPYqSDYqti12YjZitixPC90ZXh0Pjwvc3ZnPg==",
                                created_at: new Date().toISOString()
                            }
                        ],
                        services: [
                            {
                                id: '1',
                                name: "ØªØµÙˆÙŠØ± Ø­ÙÙ„Ø§Øª Ø§Ù„Ø²ÙØ§Ù",
                                description: "ØªØµÙˆÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ø­ÙÙ„Ø§Øª Ø§Ù„Ø²ÙØ§Ù Ù…Ø¹ ØªØºØ·ÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©",
                                price: "Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø§Ù‚Ø©",
                                category: "photography"
                            },
                            {
                                id: '2',
                                name: "Ø¬Ù„Ø³Ø§Øª Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„Ø´Ø®ØµÙŠØ©",
                                description: "Ø¬Ù„Ø³Ø§Øª ØªØµÙˆÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù„Ø£ÙØ±Ø§Ø¯ ÙˆØ§Ù„Ø¹Ø§Ø¦Ù„Ø§Øª ÙÙŠ Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø£Ùˆ Ø®Ø§Ø±Ø¬ÙŠ",
                                price: "200 Ø±ÙŠØ§Ù„",
                                category: "photography"
                            }
                        ],
                        articles: [
                            {
                                id: '1',
                                title: "Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ ØµÙˆØ± Ø§Ù„Ø²ÙØ§Ù",
                                content: "ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø³Ø£Ø´Ø§Ø±ÙƒÙƒÙ… Ø£Ù‡Ù… Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØµÙˆØ± Ø²ÙØ§Ù Ù…Ø«Ø§Ù„ÙŠØ©. Ø£ÙˆÙ„Ø§Ù‹ØŒ Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…Ø³Ø¨Ù‚ Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹...",
                                created_at: new Date().toISOString()
                            }
                        ],
                        about: "Ù…ØµÙˆØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ Ù…Ø­ØªØ±Ù Ø¨Ø®Ø¨Ø±Ø© ØªØ²ÙŠØ¯ Ø¹Ù† 10 Ø³Ù†ÙˆØ§Øª ÙÙŠ Ù…Ø¬Ø§Ù„ Ø§Ù„ØªØµÙˆÙŠØ±. Ù…ØªØ®ØµØµ ÙÙŠ ØªØµÙˆÙŠØ± Ø­ÙÙ„Ø§Øª Ø§Ù„Ø²ÙØ§Ù ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ø®Ø§ØµØ© ÙˆØ§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©. Ø£Ø³Ø¹Ù‰ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„ØªÙ‚Ø¯ÙŠÙ… Ø£ÙØ¶Ù„ Ø¬ÙˆØ¯Ø© ÙˆØ®Ø¯Ù…Ø© Ù„Ø¹Ù…Ù„Ø§Ø¦ÙŠ.",
                        settings: {
                            site_title: "Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… - Ù…ØµÙˆØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ",
                            hero_description: "Ø£Ø³Ø¹Ù‰ Ù„ØªØ®Ù„ÙŠØ¯ Ù„Ø­Ø¸Ø§ØªÙƒÙ… Ø§Ù„Ø«Ù…ÙŠÙ†Ø© Ø¨Ø£Ø¬Ù…Ù„ Ø§Ù„ØµÙˆØ± ÙˆØ£Ø±ÙˆØ¹ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª",
                            phone: "771145933",
                            facebook_link: "",
                            instagram_link: "",
                            twitter_link: ""
                        },
                        messages: [],
                        admin: {
                            username: "admin",
                            password: "123456"
                        }
                    };
                    localStorage.setItem('photographerDB', JSON.stringify(demoData));
                }
            }

            async initializeDefaultData() {
                if (!this.isSupabaseReady) return;

                try {
                    // Check if data already exists
                    const { data: portfolio } = await window.supabase
                        .from('portfolio')
                        .select('*')
                        .limit(1);
                    
                    if (!portfolio || portfolio.length === 0) {
                        // Initialize with default data
                        await this.createDefaultData();
                    }
                } catch (error) {
                    console.error('Error initializing default data:', error);
                }
            }

            async createDefaultData() {
                try {
                    // Default portfolio items
                    const defaultPortfolio = [
                        {
                            title: "Ø­ÙÙ„ Ø²ÙØ§Ù Ø±Ø§Ø¦Ø¹",
                            category: "wedding",
                            description: "Ù„Ø­Ø¸Ø§Øª Ø¬Ù…ÙŠÙ„Ø© Ù…Ù† Ø­ÙÙ„ Ø²ÙØ§Ù Ù…Ù…ÙŠØ²",
                            image_url: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y3ZmFmYyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM0YTVjNmEiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7Ysdin2YXZhCDYstmB2KfZgTwvdGV4dD48L3N2Zz4="
                        },
                        {
                            title: "Ø¬Ù„Ø³Ø© ØªØµÙˆÙŠØ± Ø´Ø®ØµÙŠØ©",
                            category: "portrait",
                            description: "Ø¬Ù„Ø³Ø© ØªØµÙˆÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù„Ø¨ÙˆØ±ØªØ±ÙŠÙ‡",
                            image_url: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2VkZjJmNyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM0YTVjNmEiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7YrNmE2LPYqSDYqti12YjZitixPC90ZXh0Pjwvc3ZnPg=="
                        }
                    ];

                    // Default services
                    const defaultServices = [
                        {
                            name: "ØªØµÙˆÙŠØ± Ø­ÙÙ„Ø§Øª Ø§Ù„Ø²ÙØ§Ù",
                            description: "ØªØµÙˆÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ø­ÙÙ„Ø§Øª Ø§Ù„Ø²ÙØ§Ù Ù…Ø¹ ØªØºØ·ÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©",
                            price: "Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø§Ù‚Ø©",
                            category: "photography"
                        },
                        {
                            name: "Ø¬Ù„Ø³Ø§Øª Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„Ø´Ø®ØµÙŠØ©",
                            description: "Ø¬Ù„Ø³Ø§Øª ØªØµÙˆÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù„Ø£ÙØ±Ø§Ø¯ ÙˆØ§Ù„Ø¹Ø§Ø¦Ù„Ø§Øª ÙÙŠ Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø£Ùˆ Ø®Ø§Ø±Ø¬ÙŠ",
                            price: "200 Ø±ÙŠØ§Ù„",
                            category: "photography"
                        }
                    ];

                    // Add default data
                    await window.supabase.from('portfolio').insert(defaultPortfolio);
                    await window.supabase.from('services').insert(defaultServices);

                    // Add default settings
                    await window.supabase.from('settings').insert({
                        site_title: "Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… - Ù…ØµÙˆØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ",
                        hero_description: "Ø£Ø³Ø¹Ù‰ Ù„ØªØ®Ù„ÙŠØ¯ Ù„Ø­Ø¸Ø§ØªÙƒÙ… Ø§Ù„Ø«Ù…ÙŠÙ†Ø© Ø¨Ø£Ø¬Ù…Ù„ Ø§Ù„ØµÙˆØ± ÙˆØ£Ø±ÙˆØ¹ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª",
                        phone: "771145933",
                        facebook_link: "",
                        instagram_link: "",
                        twitter_link: ""
                    });

                    // Add default about
                    await window.supabase.from('about').insert({
                        content: "Ù…ØµÙˆØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ Ù…Ø­ØªØ±Ù Ø¨Ø®Ø¨Ø±Ø© ØªØ²ÙŠØ¯ Ø¹Ù† 10 Ø³Ù†ÙˆØ§Øª ÙÙŠ Ù…Ø¬Ø§Ù„ Ø§Ù„ØªØµÙˆÙŠØ±. Ù…ØªØ®ØµØµ ÙÙŠ ØªØµÙˆÙŠØ± Ø­ÙÙ„Ø§Øª Ø§Ù„Ø²ÙØ§Ù ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ø®Ø§ØµØ©."
                    });

                    // Add default admin
                    await window.supabase.from('admin').insert({
                        username: "admin",
                        password: "123456"
                    });

                    console.log('âœ… Default data created successfully');
                } catch (error) {
                    console.error('âŒ Error creating default data:', error);
                }
            }

            // Portfolio methods
            async getPortfolio() {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    return data.portfolio || [];
                }

                try {
                    const { data, error } = await window.supabase
                        .from('portfolio')
                        .select('*')
                        .order('created_at', { ascending: false });

                    if (error) throw error;
                    return data || [];
                } catch (error) {
                    console.error('Error getting portfolio:', error);
                    return [];
                }
            }

            async addPortfolioItem(item) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    item.id = Date.now().toString();
                    item.created_at = new Date().toISOString();
                    data.portfolio = data.portfolio || [];
                    data.portfolio.push(item);
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return item;
                }

                try {
                    const { data, error } = await window.supabase
                        .from('portfolio')
                        .insert([item])
                        .select();

                    if (error) throw error;
                    return data[0];
                } catch (error) {
                    console.error('Error adding portfolio item:', error);
                    throw error;
                }
            }

            async updatePortfolioItem(id, updatedItem) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    const index = data.portfolio.findIndex(item => item.id === id);
                    if (index !== -1) {
                        data.portfolio[index] = { ...data.portfolio[index], ...updatedItem };
                        localStorage.setItem('photographerDB', JSON.stringify(data));
                    }
                    return;
                }

                try {
                    const { error } = await window.supabase
                        .from('portfolio')
                        .update(updatedItem)
                        .eq('id', id);

                    if (error) throw error;
                } catch (error) {
                    console.error('Error updating portfolio item:', error);
                    throw error;
                }
            }

            async deletePortfolioItem(id) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    data.portfolio = data.portfolio.filter(item => item.id !== id);
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return;
                }

                try {
                    const { error } = await window.supabase
                        .from('portfolio')
                        .delete()
                        .eq('id', id);

                    if (error) throw error;
                } catch (error) {
                    console.error('Error deleting portfolio item:', error);
                    throw error;
                }
            }

            // Services methods
            async getServices() {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    return data.services || [];
                }

                try {
                    const { data, error } = await window.supabase
                        .from('services')
                        .select('*');

                    if (error) throw error;
                    return data || [];
                } catch (error) {
                    console.error('Error getting services:', error);
                    return [];
                }
            }

            async addService(service) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    service.id = Date.now().toString();
                    data.services = data.services || [];
                    data.services.push(service);
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return service;
                }

                try {
                    const { data, error } = await window.supabase
                        .from('services')
                        .insert([service])
                        .select();

                    if (error) throw error;
                    return data[0];
                } catch (error) {
                    console.error('Error adding service:', error);
                    throw error;
                }
            }

            async updateService(id, updatedService) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    const index = data.services.findIndex(item => item.id === id);
                    if (index !== -1) {
                        data.services[index] = { ...data.services[index], ...updatedService };
                        localStorage.setItem('photographerDB', JSON.stringify(data));
                    }
                    return;
                }

                try {
                    const { error } = await window.supabase
                        .from('services')
                        .update(updatedService)
                        .eq('id', id);

                    if (error) throw error;
                } catch (error) {
                    console.error('Error updating service:', error);
                    throw error;
                }
            }

            async deleteService(id) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    data.services = data.services.filter(item => item.id !== id);
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return;
                }

                try {
                    const { error } = await window.supabase
                        .from('services')
                        .delete()
                        .eq('id', id);

                    if (error) throw error;
                } catch (error) {
                    console.error('Error deleting service:', error);
                    throw error;
                }
            }

            // Articles methods
            async getArticles() {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    return data.articles || [];
                }

                try {
                    const { data, error } = await window.supabase
                        .from('articles')
                        .select('*')
                        .order('created_at', { ascending: false });

                    if (error) throw error;
                    return data || [];
                } catch (error) {
                    console.error('Error getting articles:', error);
                    return [];
                }
            }

            async addArticle(article) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    article.id = Date.now().toString();
                    article.created_at = new Date().toISOString();
                    data.articles = data.articles || [];
                    data.articles.push(article);
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return article;
                }

                try {
                    const { data, error } = await window.supabase
                        .from('articles')
                        .insert([article])
                        .select();

                    if (error) throw error;
                    return data[0];
                } catch (error) {
                    console.error('Error adding article:', error);
                    throw error;
                }
            }

            async updateArticle(id, updatedArticle) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    const index = data.articles.findIndex(item => item.id === id);
                    if (index !== -1) {
                        data.articles[index] = { ...data.articles[index], ...updatedArticle };
                        localStorage.setItem('photographerDB', JSON.stringify(data));
                    }
                    return;
                }

                try {
                    const { error } = await window.supabase
                        .from('articles')
                        .update(updatedArticle)
                        .eq('id', id);

                    if (error) throw error;
                } catch (error) {
                    console.error('Error updating article:', error);
                    throw error;
                }
            }

            async deleteArticle(id) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    data.articles = data.articles.filter(item => item.id !== id);
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return;
                }

                try {
                    const { error } = await window.supabase
                        .from('articles')
                        .delete()
                        .eq('id', id);

                    if (error) throw error;
                } catch (error) {
                    console.error('Error deleting article:', error);
                    throw error;
                }
            }

            // About methods
            async getAbout() {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    return data.about || '';
                }
                                      try {
                    const { data, error } = await window.supabase
                        .from('about')
                        .select('content')
                        .limit(1);

                    if (error) throw error;
                    return data && data.length > 0 ? data[0].content : '';
                } catch (error) {
                    console.error('Error getting about:', error);
                    return '';
                }
            }

            async updateAbout(content) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    data.about = content;
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return;
                }

                try {
                    // First try to update existing record
                    const { data: existing } = await window.supabase
                        .from('about')
                        .select('id')
                        .limit(1);

                    if (existing && existing.length > 0) {
                        const { error } = await window.supabase
                            .from('about')
                            .update({ content })
                            .eq('id', existing[0].id);
                        if (error) throw error;
                    } else {
                        const { error } = await window.supabase
                            .from('about')
                            .insert([{ content }]);
                        if (error) throw error;
                    }
                } catch (error) {
                    console.error('Error updating about:', error);
                    throw error;
                }
            }

            // Settings methods
            async getSettings() {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    return data.settings || {};
                }

                try {
                    const { data, error } = await window.supabase
                        .from('settings')
                        .select('*')
                        .limit(1);

                    if (error) throw error;
                    return data && data.length > 0 ? data[0] : {};
                } catch (error) {
                    console.error('Error getting settings:', error);
                    return {};
                }
            }

            async updateSettings(settings) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    data.settings = { ...data.settings, ...settings };
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return;
                }

                try {
                    // First try to update existing record
                    const { data: existing } = await window.supabase
                        .from('settings')
                        .select('id')
                        .limit(1);

                    if (existing && existing.length > 0) {
                        const { error } = await window.supabase
                            .from('settings')
                            .update(settings)
                            .eq('id', existing[0].id);
                        if (error) throw error;
                    } else {
                        const { error } = await window.supabase
                            .from('settings')
                            .insert([settings]);
                        if (error) throw error;
                    }
                } catch (error) {
                    console.error('Error updating settings:', error);
                    throw error;
                }
            }

            // Messages methods
            async getMessages() {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    return data.messages || [];
                }

                try {
                    const { data, error } = await window.supabase
                        .from('messages')
                        .select('*')
                        .order('created_at', { ascending: false });

                    if (error) throw error;
                    return data || [];
                } catch (error) {
                    console.error('Error getting messages:', error);
                    return [];
                }
            }

            async addMessage(message) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    message.id = Date.now().toString();
                    message.created_at = new Date().toISOString();
                    data.messages = data.messages || [];
                    data.messages.push(message);
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return message;
                }

                try {
                    const { data, error } = await window.supabase
                        .from('messages')
                        .insert([message])
                        .select();

                    if (error) throw error;
                    return data[0];
                } catch (error) {
                    console.error('Error adding message:', error);
                    throw error;
                }
            }

            async deleteMessage(id) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    data.messages = data.messages.filter(item => item.id !== id);
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return;
                }

                try {
                    const { error } = await window.supabase
                        .from('messages')
                        .delete()
                        .eq('id', id);

                    if (error) throw error;
                } catch (error) {
                    console.error('Error deleting message:', error);
                    throw error;
                }
            }

            // Admin methods
            async checkAdmin(username, password) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    const admin = data.admin || {};
                    return admin.username === username && admin.password === password;
                }

                try {
                    const { data, error } = await window.supabase
                        .from('admin')
                        .select('*')
                        .eq('username', username)
                        .eq('password', password)
                        .limit(1);

                    if (error) throw error;
                    return data && data.length > 0;
                } catch (error) {
                    console.error('Error checking admin:', error);
                    return false;
                }
            }

            async updateAdmin(username, password) {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    data.admin = { username, password };
                    localStorage.setItem('photographerDB', JSON.stringify(data));
                    return;
                }

                try {
                    // First try to update existing record
                    const { data: existing } = await window.supabase
                        .from('admin')
                        .select('id')
                        .limit(1);

                    if (existing && existing.length > 0) {
                        const { error } = await window.supabase
                            .from('admin')
                            .update({ username, password })
                            .eq('id', existing[0].id);
                        if (error) throw error;
                    } else {
                        const { error } = await window.supabase
                            .from('admin')
                            .insert([{ username, password }]);
                        if (error) throw error;
                    }
                } catch (error) {
                    console.error('Error updating admin:', error);
                    throw error;
                }
            }

            async getAdmin() {
                if (!this.isSupabaseReady) {
                    const data = JSON.parse(localStorage.getItem('photographerDB') || '{}');
                    return data.admin || {};
                }

                try {
                    const { data, error } = await window.supabase
                        .from('admin')
                        .select('*')
                        .limit(1);

                    if (error) throw error;
                    return data && data.length > 0 ? data[0] : {};
                } catch (error) {
                    console.error('Error getting admin:', error);
                    return {};
                }
            }

            // Image upload method
            async uploadImage(file) {
                if (!this.isSupabaseReady) {
                    // Convert to base64 for demo mode
                    return new Promise((resolve) => {
                        const reader = new FileReader();
                        reader.onload = (e) => resolve(e.target.result);
                        reader.readAsDataURL(file);
                    });
                }

                try {
                    const fileName = `${Date.now()}_${file.name}`;
                    const { data, error } = await window.supabase.storage
                        .from('images')
                        .upload(fileName, file);

                    if (error) throw error;

                    // Get public URL
                    const { data: { publicUrl } } = window.supabase.storage
                        .from('images')
                        .getPublicUrl(fileName);

                    return publicUrl;
                } catch (error) {
                    console.error('Error uploading image:', error);
                    // Fallback to base64 if upload fails
                    return new Promise((resolve) => {
                        const reader = new FileReader();
                        reader.onload = (e) => resolve(e.target.result);
                        reader.readAsDataURL(file);
                    });
                }
            }
        }
// ğŸ”’ Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù„Ù…ÙˆÙ‚Ø¹ Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù…
class SecurityManager {
    constructor() {
        this.maxLoginAttempts = 3;
        this.lockoutDuration = 15 * 60 * 1000; // 15 Ø¯Ù‚ÙŠÙ‚Ø©
        this.sessionTimeout = 30 * 60 * 1000; // 30 Ø¯Ù‚ÙŠÙ‚Ø©
        this.loginAttempts = this.getLoginAttempts();
        this.lastActivity = Date.now();
        this.initSecurity();
    }

    initSecurity() {
        this.checkLockout();
        this.setupSessionTimeout();
        this.monitorActivity();
        console.log('ğŸ›¡ï¸ Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù†Ø´Ø· - Ù…ÙˆÙ‚Ø¹ Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… Ù…Ø­Ù…ÙŠ');
    }

    getLoginAttempts() {
        const attempts = localStorage.getItem('jameel_admin_attempts');
        return attempts ? JSON.parse(attempts) : { count: 0, timestamp: 0 };
    }

    saveLoginAttempts(attempts) {
        localStorage.setItem('jameel_admin_attempts', JSON.stringify(attempts));
    }

    isLockedOut() {
        const now = Date.now();
        if (this.loginAttempts.count >= this.maxLoginAttempts) {
            const timeSinceLockout = now - this.loginAttempts.timestamp;
            return timeSinceLockout < this.lockoutDuration;
        }
        return false;
    }

    getRemainingLockoutTime() {
        const now = Date.now();
        const timeSinceLockout = now - this.loginAttempts.timestamp;
        const remaining = this.lockoutDuration - timeSinceLockout;
        return Math.max(0, Math.ceil(remaining / 1000 / 60));
    }

    checkLockout() {
        if (this.isLockedOut()) {
            const remaining = this.getRemainingLockoutTime();
            if (remaining > 0) {
                this.showLockoutMessage(remaining);
                return true;
            } else {
                this.resetLoginAttempts();
            }
        }
        return false;
    }

    recordFailedLogin() {
        this.loginAttempts.count++;
        this.loginAttempts.timestamp = Date.now();
        this.saveLoginAttempts(this.loginAttempts);
        this.logSecurityEvent('Ù…Ø­Ø§ÙˆÙ„Ø© Ø¯Ø®ÙˆÙ„ ÙØ§Ø´Ù„Ø©', {
            attempts: this.loginAttempts.count,
            timestamp: new Date().toLocaleString('ar-SA')
        });
    }

    recordSuccessfulLogin() {
        this.resetLoginAttempts();
        this.lastActivity = Date.now();
        this.logSecurityEvent('Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­ Ù„Ù„Ù…Ø¯ÙŠØ±', {
            timestamp: new Date().toLocaleString('ar-SA')
        });
    }

    resetLoginAttempts() {
        this.loginAttempts = { count: 0, timestamp: 0 };
        this.saveLoginAttempts(this.loginAttempts);
    }

    setupSessionTimeout() {
        setInterval(() => {
            if (isAdminLoggedIn) {
                const timeSinceActivity = Date.now() - this.lastActivity;
                if (timeSinceActivity > this.sessionTimeout) {
                    this.forceLogout('Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù‡Ù„Ø© Ø§Ù„Ø¬Ù„Ø³Ø©');
                }
            }
        }, 60000);
    }

    monitorActivity() {
        ['click', 'keypress', 'mousemove', 'scroll'].forEach(event => {
            document.addEventListener(event, () => {
                if (isAdminLoggedIn) {
                    this.lastActivity = Date.now();
                }
            });
        });
    }

    forceLogout(reason) {
        isAdminLoggedIn = false;
        hideAdminPanel();
        this.logSecurityEvent('Ø®Ø±ÙˆØ¬ Ø¥Ø¬Ø¨Ø§Ø±ÙŠ', {
            reason: reason,
            timestamp: new Date().toLocaleString('ar-SA')
        });
        alert('ğŸ”’ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹: ' + reason);
    }

    showLockoutMessage(minutes) {
        alert(`ğŸš« ØªÙ… Ø­Ø¸Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¤Ù‚ØªØ§Ù‹!\n\nØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ù…Ù† Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª.\nØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©.\n\nâš ï¸ Ø­Ù…Ø§ÙŠØ© Ù…ÙˆÙ‚Ø¹ Ø¬Ù…ÙŠÙ„ ØºØ§Ù†Ù… Ù†Ø´Ø·Ø©.`);
        hideAdminLogin();
    }

    logSecurityEvent(event, data) {
        const logs = JSON.parse(localStorage.getItem('jameel_security_logs') || '[]');
        logs.push({
            id: Date.now(),
            event: event,
            data: data,
            timestamp: Date.now()
        });
        if (logs.length > 50) {
            logs.splice(0, logs.length - 50);
        }
        localStorage.setItem('jameel_security_logs', JSON.stringify(logs));
    }

    getSecurityLogs() {
        return JSON.parse(localStorage.getItem('jameel_security_logs') || '[]');
    }
}

// ØªÙØ¹ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ©
const security = new SecurityManager();
        // Initialize database
        const db = new SupabaseDB();
        let isAdminLoggedIn = false;

        // Utility functions
        function showLoading(elementId) {
            const element = document.getElementById(elementId);
            if (element) element.classList.remove('hidden');
        }

        function hideLoading(elementId) {
            const element = document.getElementById(elementId);
            if (element) element.classList.add('hidden');
        }

        function showContent(elementId) {
            const element = document.getElementById(elementId);
            if (element) element.classList.remove('hidden');
        }

        function hideContent(elementId) {
            const element = document.getElementById(elementId);
            if (element) element.classList.add('hidden');
        }

        // Load initial content
        document.addEventListener('DOMContentLoaded', async function() {
            // Wait for Supabase to initialize
            setTimeout(async () => {
                await loadPortfolio();
                await loadServices();
                await loadAbout();
                await loadArticles();
                await loadSettings();
            }, 2000);
        });

        // Navigation functions
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        // Portfolio functions
        async function loadPortfolio() {
                        try {
                                showLoading('portfolioLoading');
                                hideContent('portfolioGrid');
                                const supabase = window.supabase ? window.supabase.createClient(
                                    "https://uspxswigpccxmgujpdpg.supabase.co",
                                    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVzcHhzd2lncGNjeG1ndWpwZHBnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0MjcxODYsImV4cCI6MjA3MjAwMzE4Nn0.I3hFirAEgcU7L4HGTfTP4h1cCEQFMHT7wDi-1-5AKtY"
                                ) : null;
                                const currentUser = JSON.parse(localStorage.getItem("user"));
                                const { data: portfolio, error } = await supabase
                                    .from('portfolio')
                                    .select('*')
                                    .order('created_at', { ascending: false });
                                const grid = document.getElementById('portfolioGrid');
                                if (error || !portfolio) {
                                    grid.innerHTML = '<div class="col-span-full text-center py-8 text-red-600">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø±Ø¶</div>';
                                    hideLoading('portfolioLoading');
                                    showContent('portfolioGrid');
                                    return;
                                }
                                if (portfolio.length === 0) {
                                    grid.innerHTML = '<div class="col-span-full text-center py-8 text-gray-600">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ± ÙÙŠ Ø§Ù„Ù…Ø¹Ø±Ø¶ Ø­Ø§Ù„ÙŠØ§Ù‹</div>';
                                } else {
                                    grid.innerHTML = '';
                                    for (const item of portfolio) {
                                        const div = document.createElement('div');
                                        div.classList.add("gallery-item", "portfolio-item");
                                        div.setAttribute('data-category', item.category);
                                        div.innerHTML = `
                                            <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                                                <img src="${item.image_url}" alt="${item.title}" class="w-full h-64 object-cover cursor-pointer" onclick="openLightbox('${item.image_url}')">
                                                <div class="p-4">
                                                    <h3 class="font-bold text-lg mb-2">${item.title}</h3>
                                                    <p class="text-gray-600 text-sm">${item.description || ''}</p>
                                                    <!-- Ø²Ø± Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨ -->
                                                    <a href="https://wa.me/?text=${encodeURIComponent(item.image_url)}" target="_blank" class="block mt-2 text-green-600 hover:text-green-800 text-sm"><i class="fab fa-whatsapp"></i> Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØµÙˆØ±Ø© Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨</a>
                                                    <!-- Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ -->
                                                    <button onclick="likeImage(${item.id})" class="mt-3 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded flex items-center gap-2">
                                                        <i class="fas fa-heart"></i>
                                                        <span id="likes-count-${item.id}">0</span> Ø¥Ø¹Ø¬Ø§Ø¨
                                                    </button>
                                                </div>
                                            </div>
                                        `;
                                        grid.appendChild(div);
                                        loadLikesOnly(item.id, supabase);
                                    }
                                }
                                hideLoading('portfolioLoading');
                                showContent('portfolioGrid');
                        } catch (error) {
                                console.error('Error loading portfolio:', error);
                                hideLoading('portfolioLoading');
                                showContent('portfolioGrid');
                                document.getElementById('portfolioGrid').innerHTML = '<div class="col-span-full text-center py-8 text-red-600">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø±Ø¶</div>';
                        }
                }


                // Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª ÙÙ‚Ø·
                async function loadLikesOnly(portfolioId, supabase) {
                    const { data: likes } = await supabase
                        .from('likes')
                        .select('*')
                        .eq('portfolio_id', portfolioId);
                    document.getElementById(`likes-count-${portfolioId}`).textContent = likes.length;
                }

                // Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ø¬Ø§Ø¨
                async function likeImage(portfolioId) {
                    const supabase = window.supabase ? window.supabase.createClient(
                        "https://uspxswigpccxmgujpdpg.supabase.co",
                        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVzcHhzd2lncGNjeG1ndWpwZHBnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0MjcxODYsImV4cCI6MjA3MjAwMzE4Nn0.I3hFirAEgcU7L4HGTfTP4h1cCEQFMHT7wDi-1-5AKtY"
                    ) : null;
                    const currentUser = JSON.parse(localStorage.getItem("user"));
                    if (!currentUser) {
                        alert("ğŸ”’ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¹Ø¬Ø§Ø¨");
                        return;
                    }
                    // ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¥Ø¹Ø¬Ø§Ø¨ Ù…Ø³Ø¨Ù‚
                    const { data: existingLike } = await supabase
                        .from('likes')
                        .select('*')
                        .eq('portfolio_id', portfolioId)
                        .eq('user_id', currentUser.id)
                        .maybeSingle();
                    if (existingLike) {
                        alert("âŒ Ù„Ù‚Ø¯ Ø£Ø¹Ø¬Ø¨Øª Ø¨Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ù‚Ø¨Ù„");
                        return;
                    }
                    const { error } = await supabase
                        .from('likes')
                        .insert([{ portfolio_id: portfolioId, user_id: currentUser.id }]);
                    if (!error) {
                        loadLikesOnly(portfolioId, supabase);
                    } else {
                        alert("âš ï¸ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨");
                    }
                }

        function filterPortfolio(category) {
            const items = document.querySelectorAll('.portfolio-item');
            const buttons = document.querySelectorAll('.filter-btn');
            
            // Update button styles
            buttons.forEach(btn => {
                btn.classList.remove('bg-brand-red', 'text-white');
                btn.classList.add('bg-gray-200', 'text-black');
            });
            event.target.classList.remove('bg-gray-200', 'text-black');
            event.target.classList.add('bg-brand-red', 'text-white');
            
            // Filter items
            items.forEach(item => {
                if (category === 'all' || item.dataset.category === category) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Services functions
        async function loadServices() {
            try {
                showLoading('servicesLoading');
                hideContent('servicesGrid');
                
                const services = await db.getServices();
                const grid = document.getElementById('servicesGrid');
                
                if (services.length === 0) {
                    grid.innerHTML = '<div class="col-span-full text-center py-8 text-gray-600">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø¯Ù…Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</div>';
                } else {
                    grid.innerHTML = services.map(service => `
                        <div class="bg-white p-6 rounded-lg shadow-lg">
                            <h3 class="font-bold text-xl mb-4 text-brand-red">${service.name}</h3>
                            <p class="text-gray-700 mb-4">${service.description}</p>
                            ${service.price ? `<div class="text-lg font-bold text-black">${service.price}</div>` : ''}
                        </div>
                    `).join('');
                }
                
                hideLoading('servicesLoading');
                showContent('servicesGrid');
            } catch (error) {
                console.error('Error loading services:', error);
                hideLoading('servicesLoading');
                showContent('servicesGrid');
                document.getElementById('servicesGrid').innerHTML = '<div class="col-span-full text-center py-8 text-red-600">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª</div>';
            }
        }

        // About functions
        async function loadAbout() {
            try {
                showLoading('aboutLoading');
                hideContent('aboutContent');
                
                const about = await db.getAbout();
                const content = document.getElementById('aboutContent');
                
                if (about) {
                    content.innerHTML = `<p>${about}</p>`;
                } else {
                    content.innerHTML = '<p class="text-gray-600">Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¨Ø¹Ø¯</p>';
                }
                
                hideLoading('aboutLoading');
                showContent('aboutContent');
            } catch (error) {
                console.error('Error loading about:', error);
                hideLoading('aboutLoading');
                showContent('aboutContent');
                document.getElementById('aboutContent').innerHTML = '<p class="text-red-600">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©</p>';
            }
        }

        // Articles functions
        async function loadArticles() {
            try {
                showLoading('articlesLoading');
                hideContent('articlesGrid');
                
                const articles = await db.getArticles();
                const grid = document.getElementById('articlesGrid');
                
                if (articles.length === 0) {
                    grid.innerHTML = '<div class="col-span-full text-center py-8 text-gray-600">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ù„Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</div>';
                } else {
                    grid.innerHTML = articles.map(article => `
                        <div class="bg-white p-6 rounded-lg shadow-lg">
                            <h3 class="font-bold text-xl mb-4 text-brand-red">${article.title}</h3>
                            <p class="text-gray-700">${article.content.substring(0, 150)}...</p>
                            <div class="mt-4 text-sm text-gray-500">
                                ${new Date(article.created_at).toLocaleDateString('ar-SA')}
                            </div>
                        </div>
                    `).join('');
                }
                
                hideLoading('articlesLoading');
                showContent('articlesGrid');
            } catch (error) {
                console.error('Error loading articles:', error);
                hideLoading('articlesLoading');
                showContent('articlesGrid');
                document.getElementById('articlesGrid').innerHTML = '<div class="col-span-full text-center py-8 text-red-600">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</div>';
            }
        }

        // Settings functions
        async function loadSettings() {
            try {
                const settings = await db.getSettings();
                
                if (settings.hero_description) {
                    document.getElementById('heroDescription').textContent = settings.hero_description;
                }
                
                if (settings.phone) {
                    document.getElementById('contactPhone').textContent = settings.phone;
                }
                
                // Load social links
                const socialLinks = document.getElementById('socialLinks');
                let linksHTML = '';
                if (settings.facebook_link) {
                    linksHTML += `<a href="${settings.facebook_link}" class="text-blue-500 hover:text-blue-400"><i class="fab fa-facebook text-2xl"></i></a>`;
                }
                if (settings.instagram_link) {
                    linksHTML += `<a href="${settings.instagram_link}" class="text-pink-500 hover:text-pink-400"><i class="fab fa-instagram text-2xl"></i></a>`;
                }
                if (settings.twitter_link) {
                    linksHTML += `<a href="${settings.twitter_link}" class="text-blue-400 hover:text-blue-300"><i class="fab fa-twitter text-2xl"></i></a>`;
                }
                socialLinks.innerHTML = linksHTML;
            } catch (error) {
                console.error('Error loading settings:', error);
            }
        }

        // Contact form
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const submitBtn = document.getElementById('contactSubmitText');
                const loadingBtn = document.getElementById('contactSubmitLoading');
                
                submitBtn.classList.add('hidden');
                loadingBtn.classList.remove('hidden');
                
                const message = {
                    name: document.getElementById('clientName').value,
                    email: document.getElementById('clientEmail').value,
                    phone: document.getElementById('clientPhone').value,
                    message: document.getElementById('clientMessage').value
                };
                
                await db.addMessage(message);
                alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ø£ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.');
                this.reset();
                
                submitBtn.classList.remove('hidden');
                loadingBtn.classList.add('hidden');
            } catch (error) {
                console.error('Error sending message:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                
                document.getElementById('contactSubmitText').classList.remove('hidden');
                document.getElementById('contactSubmitLoading').classList.add('hidden');
            }
        });

        // Lightbox functions
        function openLightbox(imageSrc) {
            document.getElementById('lightboxImg').src = imageSrc;
            document.getElementById('lightbox').classList.remove('hidden');
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.add('hidden');
        }

        // Admin functions
        function showAdminLogin() {
            document.getElementById('adminLoginModal').classList.remove('hidden');
        }

        function hideAdminLogin() {
            document.getElementById('adminLoginModal').classList.add('hidden');
        }
document.getElementById('adminLoginForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // ÙØ­Øµ Ø§Ù„Ø­Ø¸Ø±
    if (security.checkLockout()) {
        return;
    }
    
    try {
        const loginText = document.getElementById('loginText');
        const loginLoading = document.getElementById('loginLoading');
        
        loginText.classList.add('hidden');
        loginLoading.classList.remove('hidden');
        
        const username = document.getElementById('adminUsername').value;
        const password = document.getElementById('adminPassword').value;
        
        if (!username || !password) {
            alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
            loginText.classList.remove('hidden');
            loginLoading.classList.add('hidden');
            return;
        }
        
        const isValid = await db.checkAdmin(username, password);
        
        if (isValid) {
            security.recordSuccessfulLogin();
            isAdminLoggedIn = true;
            hideAdminLogin();
            showAdminPanel();
            await loadAdminContent();
            alert('ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¬Ù…ÙŠÙ„! ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø£Ù…Ø§Ù†.');
        } else {
            security.recordFailedLogin();
            const remainingAttempts = security.maxLoginAttempts - security.loginAttempts.count;
            if (remainingAttempts > 0) {
                alert(`âŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${remainingAttempts}`);
            }
        }
        
        loginText.classList.remove('hidden');
        loginLoading.classList.add('hidden');
    } catch (error) {
        console.error('Error during login:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
        
        document.getElementById('loginText').classList.remove('hidden');
        document.getElementById('loginLoading').classList.add('hidden');
    }
});
        function showAdminPanel() {
            document.getElementById('adminPanel').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideAdminPanel() {
            document.getElementById('adminPanel').classList.add('hidden');
            document.body.style.overflow = 'auto';
            isAdminLoggedIn = false;
        }

        function showAdminSection(section) {
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(sec => sec.classList.add('hidden'));
            
            // Update navigation buttons
            document.querySelectorAll('.admin-nav-btn').forEach(btn => {
                btn.classList.remove('bg-brand-red');
                btn.classList.add('bg-gray-600');
            });
            
            // Show selected section
            document.getElementById('admin' + section.charAt(0).toUpperCase() + section.slice(1)).classList.remove('hidden');
            
            // Update active button
            event.target.classList.remove('bg-gray-600');
            event.target.classList.add('bg-brand-red');
        }

        async function loadAdminContent() {
            await loadAdminPortfolio();
            await loadAdminServices();
            await loadAdminArticles();
            await loadAdminMessages();
            await loadAdminSettings();
            await loadAdminAccount();
        }

        // Admin Portfolio Management
        async function loadAdminPortfolio() {
            try {
                const portfolio = await db.getPortfolio();
                const list = document.getElementById('adminPortfolioList');
                
                if (portfolio.length === 0) {
                    list.innerHTML = '<div class="col-span-full text-center py-8 text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ± ÙÙŠ Ø§Ù„Ù…Ø¹Ø±Ø¶</div>';
                } else {
                    list.innerHTML = portfolio.map(item => `
                        <div class="bg-gray-600 p-4 rounded-lg">
                            <img src="${item.image_url}" alt="${item.title}" class="w-full h-32 object-cover rounded mb-3">
                            <h4 class="text-white font-bold mb-2">${item.title}</h4>
                            <p class="text-gray-300 text-sm mb-3">${item.description}</p>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="editPortfolioItem('${item.id}')" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                                    <i class="fas fa-edit ml-1"></i>ØªØ¹Ø¯ÙŠÙ„
                                </button>
                                <button onclick="deletePortfolioItem('${item.id}')" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                                    <i class="fas fa-trash ml-1"></i>Ø­Ø°Ù
                                </button>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Error loading admin portfolio:', error);
            }
        }

        document.getElementById('imageFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('previewImg').src = e.target.result;
                    document.getElementById('imagePreview').classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('addImageForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const addText = document.getElementById('addImageText');
                const addLoading = document.getElementById('addImageLoading');
                
                addText.classList.add('hidden');
                addLoading.classList.remove('hidden');
                
                const editId = this.dataset.editId;
                const fileInput = document.getElementById('imageFile');
                
                const item = {
                    title: document.getElementById('imageTitle').value,
                    category: document.getElementById('imageCategory').value,
                    description: document.getElementById('imageDescription').value
                };
                
                if (editId) {
                    // Edit mode
                    if (fileInput.files[0]) {
                        item.image_url = await db.uploadImage(fileInput.files[0]);
                    }
                    await db.updatePortfolioItem(editId, item);
                    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                } else {
                    // Add mode
                    if (!fileInput.files[0]) {
                        alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©');
                        addText.classList.remove('hidden');
                        addLoading.classList.add('hidden');
                        return;
                    }
                    
                    item.image_url = await db.uploadImage(fileInput.files[0]);
                    await db.addPortfolioItem(item);
                    alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                }
                
                await loadPortfolio();
                await loadAdminPortfolio();
                resetImageForm();
                
                addText.classList.remove('hidden');
                addLoading.classList.add('hidden');
            } catch (error) {
                console.error('Error saving image:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©');
                
                document.getElementById('addImageText').classList.remove('hidden');
                document.getElementById('addImageLoading').classList.add('hidden');
            }
        });

        function resetImageForm() {
            const form = document.getElementById('addImageForm');
            form.reset();
            form.removeAttribute('data-edit-id');
            form.querySelector('button[type="submit"] span').innerHTML = '<i class="fas fa-plus ml-2"></i>Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø©';
            document.getElementById('imagePreview').classList.add('hidden');
            document.getElementById('imageFile').required = true;
        }

        async function deletePortfolioItem(id) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø©ØŸ')) {
                try {
                    await db.deletePortfolioItem(id);
                    await loadPortfolio();
                    await loadAdminPortfolio();
                    alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                } catch (error) {
                    console.error('Error deleting portfolio item:', error);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø©');
                }
            }
        }

        async function editPortfolioItem(id) {
            try {
                const portfolio = await db.getPortfolio();
                const item = portfolio.find(p => p.id == id);
                if (!item) return;

                document.getElementById('imageTitle').value = item.title;
                document.getElementById('imageCategory').value = item.category;
                document.getElementById('imageDescription').value = item.description;
                
                // Show preview
                document.getElementById('previewImg').src = item.image_url;
                document.getElementById('imagePreview').classList.remove('hidden');
                
                // Change form to edit mode
                const form = document.getElementById('addImageForm');
                form.dataset.editId = id;
                form.querySelector('button[type="submit"] span').innerHTML = '<i class="fas fa-save ml-2"></i>Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª';
                document.getElementById('imageFile').required = false;
            } catch (error) {
                console.error('Error editing portfolio item:', error);
            }
        }

        // Admin Services Management
        async function loadAdminServices() {
            try {
                const services = await db.getServices();
                const list = document.getElementById('adminServicesList');
                
                if (services.length === 0) {
                    list.innerHTML = '<div class="text-center py-8 text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø¯Ù…Ø§Øª Ù…ØªØ§Ø­Ø©</div>';
                } else {
                    list.innerHTML = services.map(service => `
                        <div class="bg-gray-600 p-4 rounded-lg">
                            <h4 class="text-white font-bold mb-2">${service.name}</h4>
                            <p class="text-gray-300 mb-2">${service.description}</p>
                            <p class="text-brand-red font-bold mb-3">${service.price || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="editService('${service.id}')" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                                    <i class="fas fa-edit ml-1"></i>ØªØ¹Ø¯ÙŠÙ„
                                </button>
                                <button onclick="deleteService('${service.id}')" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                                    <i class="fas fa-trash ml-1"></i>Ø­Ø°Ù
                                </button>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Error loading admin services:', error);
            }
        }

        document.getElementById('addServiceForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const addText = document.getElementById('addServiceText');
                const addLoading = document.getElementById('addServiceLoading');
                
                addText.classList.add('hidden');
                addLoading.classList.remove('hidden');
                
                const editId = this.dataset.editId;
                const service = {
                    name: document.getElementById('serviceName').value,
                    description: document.getElementById('serviceDescription').value,
                    price: document.getElementById('servicePrice').value,
                    category: document.getElementById('serviceCategory').value
                };
                
                if (editId) {
                    await db.updateService(editId, service);
                    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø¯Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                } else {
                    await db.addService(service);
                    alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                }
                
                await loadServices();
                await loadAdminServices();
                resetServiceForm();
                
                addText.classList.remove('hidden');
                addLoading.classList.add('hidden');
            } catch (error) {
                console.error('Error saving service:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø®Ø¯Ù…Ø©');
                
                document.getElementById('addServiceText').classList.remove('hidden');
                document.getElementById('addServiceLoading').classList.add('hidden');
            }
        });

        function resetServiceForm() {
            const form = document.getElementById('addServiceForm');
            form.reset();
            form.removeAttribute('data-edit-id');
            form.querySelector('button[type="submit"] span').innerHTML = '<i class="fas fa-plus ml-2"></i>Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø©';
        }

        async function deleteService(id) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø©ØŸ')) {
                try {
                    await db.deleteService(id);
                    await loadServices();
                    await loadAdminServices();
                    alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø®Ø¯Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                } catch (error) {
                    console.error('Error deleting service:', error);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø®Ø¯Ù…Ø©');
                }
            }
        }

        async function editService(id) {
            try {
                const services = await db.getServices();
                const service = services.find(s => s.id == id);
                if (!service) return;

                document.getElementById('serviceName').value = service.name;
                document.getElementById('serviceDescription').value = service.description;
                document.getElementById('servicePrice').value = service.price || '';
                document.getElementById('serviceCategory').value = service.category;
                
                // Change form to edit mode
                const form = document.getElementById('addServiceForm');
                form.dataset.editId = id;
                form.querySelector('button[type="submit"] span').innerHTML = '<i class="fas fa-save ml-2"></i>Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª';
            } catch (error) {
                console.error('Error editing service:', error);
            }
        }

        // Admin Articles Management
        async function loadAdminArticles() {
            try {
                const articles = await db.getArticles();
                const list = document.getElementById('adminArticlesList');
                
                if (articles.length === 0) {
                    list.innerHTML = '<div class="text-center py-8 text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ù„Ø§Øª Ù…ØªØ§Ø­Ø©</div>';
                } else {
                    list.innerHTML = articles.map(article => `
                        <div class="bg-gray-600 p-4 rounded-lg">
                            <h4 class="text-white font-bold mb-2">${article.title}</h4>
                            <p class="text-gray-300 mb-3">${article.content.substring(0, 100)}...</p>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="editArticle('${article.id}')" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                                    <i class="fas fa-edit ml-1"></i>ØªØ¹Ø¯ÙŠÙ„
                                </button>
                                <button onclick="deleteArticle('${article.id}')" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                                    <i class="fas fa-trash ml-1"></i>Ø­Ø°Ù
                                </button>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Error loading admin articles:', error);
            }
        }

        document.getElementById('addArticleForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const addText = document.getElementById('addArticleText');
                const addLoading = document.getElementById('addArticleLoading');
                
                addText.classList.add('hidden');
                addLoading.classList.remove('hidden');
                
                const editId = this.dataset.editId;
                const article = {
                    title: document.getElementById('articleTitle').value,
                    content: document.getElementById('articleContent').value
                };
                
                if (editId) {
                    await db.updateArticle(editId, article);
                    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!');
                } else {
                    await db.addArticle(article);
                    alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!');
                }
                
                await loadArticles();
                await loadAdminArticles();
                resetArticleForm();
                
                addText.classList.remove('hidden');
                addLoading.classList.add('hidden');
            } catch (error) {
                console.error('Error saving article:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù‚Ø§Ù„');
                
                document.getElementById('addArticleText').classList.remove('hidden');
                document.getElementById('addArticleLoading').classList.add('hidden');
            }
        });

        function resetArticleForm() {
            const form = document.getElementById('addArticleForm');
            form.reset();
            form.removeAttribute('data-edit-id');
            form.querySelector('button[type="submit"] span').innerHTML = '<i class="fas fa-plus ml-2"></i>Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø§Ù„';
        }

        async function deleteArticle(id) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø§Ù„ØŸ')) {
                try {
                    await db.deleteArticle(id);
                    await loadArticles();
                    await loadAdminArticles();
                    alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!');
                } catch (error) {
                    console.error('Error deleting article:', error);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù‚Ø§Ù„');
                }
            }
        }

        async function editArticle(id) {
            try {
                const articles = await db.getArticles();
                const article = articles.find(a => a.id == id);
                if (!article) return;

                document.getElementById('articleTitle').value = article.title;
                document.getElementById('articleContent').value = article.content;
                
                // Change form to edit mode
                const form = document.getElementById('addArticleForm');
                form.dataset.editId = id;
                form.querySelector('button[type="submit"] span').innerHTML = '<i class="fas fa-save ml-2"></i>Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª';
            } catch (error) {
                console.error('Error editing article:', error);
            }
        }

        // Admin About Management
        document.getElementById('aboutForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const saveText = document.getElementById('aboutSaveText');
                const saveLoading = document.getElementById('aboutSaveLoading');
                
                saveText.classList.add('hidden');
                saveLoading.classList.remove('hidden');
                
                const content = document.getElementById('aboutText').value;
                await db.updateAbout(content);
                await loadAbout();
                alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');
                
                saveText.classList.remove('hidden');
                saveLoading.classList.add('hidden');
            } catch (error) {
                console.error('Error saving about:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©');
                
                document.getElementById('aboutSaveText').classList.remove('hidden');
                document.getElementById('aboutSaveLoading').classList.add('hidden');
            }
        });

        // Admin Settings Management
        async function loadAdminSettings() {
            try {
                const settings = await db.getSettings();
                const about = await db.getAbout();
                
                document.getElementById('siteTitle').value = settings.site_title || '';
                document.getElementById('heroDesc').value = settings.hero_description || '';
                document.getElementById('phoneNumber').value = settings.phone || '';
                document.getElementById('facebookLink').value = settings.facebook_link || '';
                document.getElementById('instagramLink').value = settings.instagram_link || '';
                document.getElementById('twitterLink').value = settings.twitter_link || '';
                document.getElementById('aboutText').value = about || '';
            } catch (error) {
                console.error('Error loading admin settings:', error);
            }
        }

        document.getElementById('settingsForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const saveText = document.getElementById('settingsSaveText');
                const saveLoading = document.getElementById('settingsSaveLoading');
                
                saveText.classList.add('hidden');
                saveLoading.classList.remove('hidden');
                
                const settings = {
                    site_title: document.getElementById('siteTitle').value,
                    hero_description: document.getElementById('heroDesc').value,
                    phone: document.getElementById('phoneNumber').value,
                    facebook_link: document.getElementById('facebookLink').value,
                    instagram_link: document.getElementById('instagramLink').value,
                    twitter_link: document.getElementById('twitterLink').value
                };
                
                await db.updateSettings(settings);
                await loadSettings();
                alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
                
                saveText.classList.remove('hidden');
                saveLoading.classList.add('hidden');
            } catch (error) {
                console.error('Error saving settings:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
                
                document.getElementById('settingsSaveText').classList.remove('hidden');
                document.getElementById('settingsSaveLoading').classList.add('hidden');
            }
        });

        // Admin Messages Management
        async function loadAdminMessages() {
            try {
                const messages = await db.getMessages();
                const list = document.getElementById('messagesList');
                
                if (messages.length === 0) {
                    list.innerHTML = '<p class="text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø¬Ø¯ÙŠØ¯Ø©</p>';
                } else {
                    list.innerHTML = messages.map(message => `
                        <div class="bg-gray-600 p-4 rounded-lg">
                            <div class="flex justify-between items-start mb-3">
                                <h4 class="text-white font-bold">${message.name}</h4>
                                <button onclick="deleteMessage('${message.id}')" class="text-red-400 hover:text-red-300">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            <p class="text-gray-300 mb-2">Ø§Ù„Ø¨Ø±ÙŠØ¯: ${message.email}</p>
                            <p class="text-gray-300 mb-2">Ø§Ù„Ù‡Ø§ØªÙ: ${message.phone}</p>
                            <p class="text-gray-200 mb-3">${message.message}</p>
                            <p class="text-gray-400 text-sm">${new Date(message.created_at).toLocaleString('ar-SA')}</p>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Error loading admin messages:', error);
            }
        }

        async function deleteMessage(id) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŸ')) {
                try {
                    await db.deleteMessage(id);
                    await loadAdminMessages();
                    alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                } catch (error) {
                    console.error('Error deleting message:', error);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø©');
                }
            }
        }

        // Account Management
        document.getElementById('accountForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const saveText = document.getElementById('accountSaveText');
                const saveLoading = document.getElementById('accountSaveLoading');
                
                saveText.classList.add('hidden');
                saveLoading.classList.remove('hidden');
                
                const currentPassword = document.getElementById('currentPassword').value;
                const newUsername = document.getElementById('newUsername').value;
                const newPassword = document.getElementById('newPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                const admin = await db.getAdmin();
                
                if (currentPassword !== admin.password) {
                    alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                    saveText.classList.remove('hidden');
                    saveLoading.classList.add('hidden');
                    return;
                }
                
                                if (newPassword !== confirmPassword) {
                    alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©');
                    saveText.classList.remove('hidden');
                    saveLoading.classList.add('hidden');
                    return;
                }
                
                if (!newUsername || !newPassword) {
                    alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                    saveText.classList.remove('hidden');
                    saveLoading.classList.add('hidden');
                    return;
                }
                
                await db.updateAdmin(newUsername, newPassword);
                alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!');
                this.reset();
                
                saveText.classList.remove('hidden');
                saveLoading.classList.add('hidden');
            } catch (error) {
                console.error('Error updating account:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø³Ø§Ø¨');
                
                document.getElementById('accountSaveText').classList.remove('hidden');
                document.getElementById('accountSaveLoading').classList.add('hidden');
            }
        });

        // Load admin account data
        async function loadAdminAccount() {
            try {
                const admin = await db.getAdmin();
                document.getElementById('newUsername').value = admin.username || '';
            } catch (error) {
                console.error('Error loading admin account:', error);
            }
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Close modals when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.add('hidden');
            }
        });

        // Hide success notice
        function hideSuccessNotice() {
            document.getElementById('successNotice').style.display = 'none';
        }

        // Auto-hide success notice after 8 seconds
        setTimeout(() => {
            const notice = document.getElementById('successNotice');
            if (notice && db.isSupabaseReady) {
                notice.style.display = 'none';
            }
        }, 8000);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'976885e4c671f9db',t:'MTc1NjQzMzU0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
                

       
